/*! For license information please see 857.e823fef0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcleopatra_regalos=self.webpackChunkcleopatra_regalos||[]).push([[857],{614:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},745:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var a=s(5043),l=s(12),r=s(4292),i=s(8421),o=s(6938);const n=(0,s(1639).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var c=s(1990),d=s(9333),x=s(1360),g=s(7365),m=s(1403),p=s(9493),h=s(5469),u=s(9292),y=s(9981),v=s(6666),b=s(924),j=s(6151),f=s(2555),N=s(614),w=s(4830),k=s(4265),A=s(9855),C=s(5240),S=s(7336),I=s(579);const P=e=>{let{isOpen:t,onClose:s}=e;const{colors:r}=(0,i.D)(),[o,n]=(0,a.useState)([]),[c,g]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[h,u]=(0,a.useState)({title:"",description:"",category:"",badge:""});(0,a.useEffect)(()=>{t&&y()},[t]);const y=()=>{const e=C.k.getItems().filter(e=>"video"===e.type);n(e)};return t?(0,I.jsxs)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:[(0,I.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(d.A,{className:"w-6 h-6",style:{color:r.primary}}),(0,I.jsx)("h2",{className:"text-2xl font-bold",style:{color:r.secondary},children:"Gesti\xf3n de Videos"})]}),(0,I.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full",children:(0,I.jsx)(N.A,{className:"w-5 h-5"})})]}),(0,I.jsxs)("div",{className:"p-6",children:[(0,I.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,I.jsxs)("p",{className:"text-gray-600",children:[o.length," video",1!==o.length?"s":""," en la galer\xeda"]}),(0,I.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white font-semibold",style:{backgroundColor:r.primary},children:[(0,I.jsx)(x.A,{className:"w-4 h-4"}),"Agregar Video"]})]}),(0,I.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:o.map(e=>(0,I.jsxs)("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:[(0,I.jsxs)("div",{className:"relative",children:[(0,I.jsx)("video",{src:e.src,className:"w-full h-32 object-cover",poster:e.thumbnail}),(0,I.jsx)("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:(0,I.jsx)(w.A,{className:"w-8 h-8 text-white"})}),e.isInstagramPost&&(0,I.jsx)("span",{className:"absolute top-2 left-2 px-2 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full",children:"IG"})]}),(0,I.jsxs)("div",{className:"p-3",children:[(0,I.jsx)("h4",{className:"font-medium text-sm mb-1 truncate",children:e.title}),(0,I.jsx)("p",{className:"text-xs text-gray-500 mb-2 line-clamp-2",children:e.description}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsx)("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:r.primaryLight,color:r.primary},children:e.badge}),(0,I.jsxs)("div",{className:"flex gap-1",children:[(0,I.jsx)("button",{onClick:()=>(e=>{p(e),u({title:e.title,description:e.description,category:e.category,badge:e.badge})})(e),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",children:(0,I.jsx)(k.A,{className:"w-3 h-3"})}),(0,I.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar este video?"))try{await C.k.removeItem(e),y()}catch(t){alert("Error al eliminar el video")}})(e.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:(0,I.jsx)(A.A,{className:"w-3 h-3"})})]})]})]})]},e.id))}),0===o.length&&(0,I.jsxs)("div",{className:"text-center py-12",children:[(0,I.jsx)(d.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,I.jsx)("p",{className:"text-gray-500 mb-4",children:"No hay videos en la galer\xeda"}),(0,I.jsx)("button",{onClick:()=>g(!0),className:"px-6 py-3 rounded-lg text-white font-semibold",style:{backgroundColor:r.primary},children:"Subir Primer Video"})]})]})]}),m&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black/50 z-60 flex items-center justify-center p-4",children:(0,I.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,I.jsx)("h3",{className:"text-lg font-bold mb-4",style:{color:r.secondary},children:"Editar Video"}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsx)("input",{type:"text",placeholder:"T\xedtulo",value:h.title,onChange:e=>u((0,f.A)((0,f.A)({},h),{},{title:e.target.value})),className:"w-full p-3 border rounded-lg"}),(0,I.jsx)("textarea",{placeholder:"Descripci\xf3n",value:h.description,onChange:e=>u((0,f.A)((0,f.A)({},h),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-24 resize-none"}),(0,I.jsxs)("select",{value:h.category,onChange:e=>u((0,f.A)((0,f.A)({},h),{},{category:e.target.value})),className:"w-full p-3 border rounded-lg",children:[(0,I.jsx)("option",{value:"Marketing",children:"Marketing"}),(0,I.jsx)("option",{value:"Productos",children:"Productos"}),(0,I.jsx)("option",{value:"Eventos",children:"Eventos"}),(0,I.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,I.jsx)("option",{value:"Admin",children:"Admin"})]}),(0,I.jsxs)("select",{value:h.badge,onChange:e=>u((0,f.A)((0,f.A)({},h),{},{badge:e.target.value})),className:"w-full p-3 border rounded-lg",children:[(0,I.jsx)("option",{value:"Nuevo",children:"Nuevo"}),(0,I.jsx)("option",{value:"Popular",children:"Popular"}),(0,I.jsx)("option",{value:"Favorito",children:"Favorito"}),(0,I.jsx)("option",{value:"Premium",children:"Premium"}),(0,I.jsx)("option",{value:"Reel",children:"Reel"})]})]}),(0,I.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,I.jsx)("button",{onClick:()=>p(null),className:"flex-1 py-2 border border-gray-300 rounded-lg",children:"Cancelar"}),(0,I.jsx)("button",{onClick:async()=>{if(m)try{const e=C.k.getItems().map(e=>e.id===m.id?(0,f.A)((0,f.A)({},e),h):e);localStorage.setItem("cleopatra_gallery_hybrid",JSON.stringify(e)),p(null),y()}catch(e){alert("Error al actualizar el video")}},className:"flex-1 py-2 text-white rounded-lg",style:{backgroundColor:r.primary},children:"Guardar"})]})]})}),c&&(0,I.jsx)(S.A,{onVideoUploaded:async e=>{try{const t=await fetch(e.url),s=await t.blob(),a=new File([s],"admin-video.mp4",{type:"video/mp4"});await C.k.addItem(a,{title:e.title,description:e.description,category:"Admin",badge:"Nuevo",isInstagramPost:!1}),y(),g(!1)}catch(t){alert("Error al subir el video")}},onClose:()=>g(!1)})]}):null},M=()=>{const{colors:e}=(0,i.D)(),{user:t,logout:f}=(0,r.A)(),N=(0,y.Zp)(),[w,k]=(0,a.useState)("dashboard"),[A,C]=(0,a.useState)([]),[S,M]=(0,a.useState)(!1),[V,E]=(0,a.useState)(null),[z,D]=(0,a.useState)(""),[_,O]=(0,a.useState)("all"),[R,T]=(0,a.useState)(!1),F=async()=>{M(!0);try{const{productService:e}=await Promise.all([s.e(466),s.e(565)]).then(s.bind(s,6565)),t=await e.getProducts();C(t.map(e=>({id:e.id.toString(),name:e.name,price:"string"===typeof e.price?e.price:String(e.price),category:"regalos"===e.category?"gifts":"tecnologia"===e.category?"tech":"gifts",image:e.image,images:e.images,description:e.description,createdAt:e.createdAt})))}catch(e){console.error("Error loading products:",e)}finally{M(!1)}};(0,a.useEffect)(()=>{F()},[]);const U=A.filter(e=>{const t=(e.name||"").toLowerCase().includes(z.toLowerCase())||(e.description||"").toLowerCase().includes(z.toLowerCase()),s="all"===_||e.category===_;return t&&s}),L=[{id:"dashboard",label:"Dashboard",icon:n,description:"Resumen y estad\xedsticas"},{id:"products",label:"Productos",icon:c.A,description:"Gestionar cat\xe1logo",count:A.length},{id:"videos",label:"Videos",icon:d.A,description:"Gestionar galer\xeda"},{id:"add",label:"Agregar",icon:x.A,description:"Nuevo producto"}];return(0,I.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,I.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,I.jsxs)("div",{className:"w-full lg:w-64 bg-white shadow-lg lg:min-h-screen",children:[(0,I.jsxs)("div",{className:"p-4 lg:p-6 border-b border-gray-200",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,I.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,I.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:e.primary},children:(0,I.jsx)(g.A,{className:"w-4 h-4 lg:w-6 lg:h-6 text-white"})}),(0,I.jsxs)("div",{children:[(0,I.jsx)("h1",{className:"text-base lg:text-lg font-bold text-gray-900",children:"Admin Panel"}),(0,I.jsx)("p",{className:"text-xs lg:text-sm text-gray-500",children:"Cleopatra Regalos"})]})]}),(0,I.jsxs)("div",{className:"flex items-center gap-1 lg:gap-2",children:[(0,I.jsx)("button",{onClick:()=>N("/"),className:"p-1.5 lg:p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",title:"Volver al inicio",children:(0,I.jsx)(m.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),(0,I.jsx)("button",{onClick:()=>{f(),N("/")},className:"p-1.5 lg:p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-red-50 transition-colors",title:"Cerrar sesi\xf3n",children:(0,I.jsx)(p.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]}),t&&(0,I.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-3 text-xs lg:text-sm text-gray-600",children:[(0,I.jsxs)("span",{children:["Bienvenido, ",(0,I.jsx)("strong",{children:t.name})]}),(0,I.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs w-fit",children:"admin"===t.role?"Administrador":"Usuario"})]})]}),(0,I.jsx)("nav",{className:"p-2 lg:p-4 space-y-1 lg:space-y-2 overflow-x-auto lg:overflow-x-visible",children:(0,I.jsx)("div",{className:"flex lg:flex-col gap-2 lg:gap-0 lg:space-y-1 min-w-max lg:min-w-0",children:L.map(t=>{const s=t.icon;return(0,I.jsxs)("button",{onClick:()=>k(t.id),className:"w-full lg:w-auto flex items-center gap-2 lg:gap-3 px-3 lg:px-4 py-2 lg:py-3 rounded-lg text-left transition-all whitespace-nowrap ".concat(w===t.id?"text-white shadow-lg":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),style:w===t.id?{backgroundColor:e.primary}:{},children:[(0,I.jsx)(s,{className:"w-4 h-4 lg:w-5 lg:h-5"}),(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("div",{className:"font-medium text-sm lg:text-base",children:t.label}),(0,I.jsx)("div",{className:"text-xs hidden lg:block ".concat(w===t.id?"text-white/80":"text-gray-400"),children:t.description})]}),void 0!==t.count&&(0,I.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(w===t.id?"bg-white/20 text-white":"bg-gray-100 text-gray-600"),children:t.count})]},t.id)})})}),(0,I.jsx)("div",{className:"p-2 lg:p-4 mt-4 lg:mt-8 hidden lg:block",children:(0,I.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 lg:p-4",children:[(0,I.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 lg:mb-3 text-sm lg:text-base",children:"Estad\xedsticas R\xe1pidas"}),(0,I.jsxs)("div",{className:"space-y-2 lg:space-y-3 text-xs lg:text-sm",children:[(0,I.jsxs)("div",{className:"flex justify-between",children:[(0,I.jsx)("span",{className:"text-gray-600",children:"Total productos:"}),(0,I.jsx)("span",{className:"font-semibold text-gray-900",children:A.length})]}),(0,I.jsxs)("div",{className:"flex justify-between",children:[(0,I.jsx)("span",{className:"text-gray-600",children:"Tecnolog\xeda:"}),(0,I.jsx)("span",{className:"font-semibold text-blue-600",children:A.filter(e=>"tech"===e.category).length})]}),(0,I.jsxs)("div",{className:"flex justify-between",children:[(0,I.jsx)("span",{className:"text-gray-600",children:"Regalos:"}),(0,I.jsx)("span",{className:"font-semibold text-yellow-600",children:A.filter(e=>"gifts"===e.category).length})]})]})]})})]}),(0,I.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,I.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 lg:px-8 py-4 lg:py-6",children:[(0,I.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 lg:gap-0 mb-3 lg:mb-4",children:[(0,I.jsxs)("div",{className:"flex items-center gap-2 lg:gap-4",children:[(0,I.jsxs)("button",{onClick:()=>N("/"),className:"flex items-center gap-1 lg:gap-2 px-3 lg:px-4 py-2 text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm lg:text-base",children:[(0,I.jsx)(h.A,{className:"w-3 h-3 lg:w-4 lg:h-4"}),(0,I.jsx)("span",{className:"hidden sm:inline",children:"Volver al Sitio"}),(0,I.jsx)("span",{className:"sm:hidden",children:"Volver"})]}),(0,I.jsxs)("div",{className:"border-l border-gray-300 pl-2 lg:pl-4",children:[(0,I.jsxs)("h2",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:["dashboard"===w&&"Dashboard","products"===w&&"Productos","videos"===w&&"Videos","add"===w&&"Agregar","edit"===w&&"Editar"]}),(0,I.jsxs)("p",{className:"text-gray-600 mt-1 text-sm lg:text-base hidden lg:block",children:["dashboard"===w&&"Resumen general del sistema","products"===w&&"Administra tu cat\xe1logo de productos","videos"===w&&"Gestiona la galer\xeda de videos","add"===w&&"Crear un nuevo producto","edit"===w&&"Modificar producto existente"]})]})]}),(0,I.jsxs)("div",{className:"flex gap-2",children:["products"===w&&(0,I.jsxs)("button",{onClick:()=>k("add"),className:"flex items-center gap-1 lg:gap-2 px-3 lg:px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm lg:text-base",style:{backgroundColor:e.primary},children:[(0,I.jsx)(x.A,{className:"w-3 h-3 lg:w-4 lg:h-4"}),(0,I.jsx)("span",{className:"hidden sm:inline",children:"Nuevo Producto"}),(0,I.jsx)("span",{className:"sm:hidden",children:"Nuevo"})]}),"videos"===w&&(0,I.jsxs)("button",{onClick:()=>T(!0),className:"flex items-center gap-1 lg:gap-2 px-3 lg:px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm lg:text-base",style:{backgroundColor:e.primary},children:[(0,I.jsx)(d.A,{className:"w-3 h-3 lg:w-4 lg:h-4"}),(0,I.jsx)("span",{className:"hidden sm:inline",children:"Gestionar Videos"}),(0,I.jsx)("span",{className:"sm:hidden",children:"Videos"})]})]})]}),"products"===w&&(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 lg:gap-4 mt-4 lg:mt-6",children:[(0,I.jsxs)("div",{className:"relative flex-1 max-w-full sm:max-w-md",children:[(0,I.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-3 h-3 lg:w-4 lg:h-4 text-gray-400"}),(0,I.jsx)("input",{type:"text",placeholder:"Buscar productos...",value:z,onChange:e=>D(e.target.value),className:"w-full pl-8 lg:pl-10 pr-3 lg:pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm lg:text-base"})]}),(0,I.jsxs)("select",{value:_,onChange:e=>O(e.target.value),className:"px-3 lg:px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm lg:text-base",children:[(0,I.jsx)("option",{value:"all",children:"Todas"}),(0,I.jsx)("option",{value:"tech",children:"Tecnolog\xeda"}),(0,I.jsx)("option",{value:"gifts",children:"Regalos"})]})]})]}),(0,I.jsx)("div",{className:"p-4 lg:p-8",children:(0,I.jsxs)(o.N,{mode:"wait",children:["dashboard"===w&&(0,I.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,I.jsx)(j.A,{products:A})},"dashboard"),"products"===w&&(0,I.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,I.jsx)(b.A,{products:U,loading:S,onEdit:e=>{E(e),k("edit")},onDelete:async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este producto?"))try{const{productService:t}=await Promise.all([s.e(466),s.e(565)]).then(s.bind(s,6565));await t.deleteProduct(e),await F()}catch(t){console.error("Error deleting product:",t)}}})},"products"),"videos"===w&&(0,I.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center py-12",children:[(0,I.jsx)(d.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,I.jsx)("h3",{className:"text-xl font-bold mb-2",style:{color:e.secondary},children:"Gesti\xf3n de Videos"}),(0,I.jsx)("p",{className:"text-gray-600 mb-6",children:"Administra los videos de la galer\xeda desde aqu\xed"}),(0,I.jsx)("button",{onClick:()=>T(!0),className:"px-6 py-3 rounded-lg text-white font-semibold",style:{backgroundColor:e.primary},children:"Abrir Gestor de Videos"})]},"videos"),("add"===w||"edit"===w)&&(0,I.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,I.jsx)(v.A,{product:V,onSave:()=>{F(),k("products"),E(null)},onCancel:()=>{k("products"),E(null)}})},w)]})})]})]}),(0,I.jsx)(P,{isOpen:R,onClose:()=>T(!1)})]})},V=()=>{const{isAuthenticated:e,isAdmin:t,user:s}=(0,r.A)(),{colors:a}=(0,i.D)();return e?t?(0,I.jsx)(M,{}):(0,I.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,I.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[(0,I.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-red-100 flex items-center justify-center",children:(0,I.jsx)("span",{className:"text-4xl",children:"\ud83d\udeab"})}),(0,I.jsx)("h1",{className:"text-2xl font-bold mb-4",style:{color:a.secondary},children:"Acceso Denegado"}),(0,I.jsx)("p",{className:"text-gray-600 mb-8",children:"No tienes permisos de administrador para acceder a esta p\xe1gina."}),(0,I.jsxs)("div",{className:"flex gap-4",children:[(0,I.jsx)(y.N_,{to:"/",className:"px-6 py-3 rounded-lg text-white font-semibold hover:opacity-90 transition-opacity",style:{backgroundColor:a.primary},children:"Ir al Inicio"}),(0,I.jsx)(y.N_,{to:"/login",className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Iniciar Sesi\xf3n"})]})]})}):(0,I.jsx)(y.C5,{to:"/login",replace:!0})}},1360:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1403:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},1419:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1990:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},2330:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},4830:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},5087:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5240:(e,t,s)=>{s.d(t,{k:()=>o});var a=s(5684),l=s(3212);const r="cleopatra_gallery_hybrid",i=!0;const o=new class{getItems(){try{const e=localStorage.getItem(r);return e?JSON.parse(e):this.getDefaultItems()}catch(e){return console.error("Error loading gallery items:",(0,l.F0)(String(e))),this.getDefaultItems()}}getDefaultItems(){return[{id:1,type:"image",src:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=800&q=80",title:"Smartwatch Collection 2024",description:"Los mejores smartwatches del mercado con tecnolog\xeda de punta.",category:"Tecnolog\xeda",badge:"Nuevo",createdAt:(new Date).toISOString(),isCloudinary:!1},{id:2,type:"image",src:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&q=80",title:"Canasta Desayuno Sorpresa",description:"Sorprende con nuestras canastas gourmet llenas de amor.",category:"Regalos",badge:"Popular",createdAt:(new Date).toISOString(),isCloudinary:!1}]}async addItem(e,t){const s=this.getItems();try{let l,n,c,d=!1;try{{const t=await a.Y.uploadFile(e);l=t.url,n=t.thumbnail,c=t.publicId,d=!0}}catch(i){console.warn("Cloudinary failed, using localStorage:",i);const t=10485760;if(e.size>t)throw new Error("Archivo muy grande para localStorage. Cloudinary no disponible.");l=await this.fileToBase64(e),n=e.type.startsWith("video/")?void 0:l,d=!1}const x={id:Date.now(),type:e.type.startsWith("video/")?"video":"image",src:l,thumbnail:n,title:t.title,description:t.description,category:t.category,badge:t.badge,isInstagramPost:t.isInstagramPost,createdAt:(new Date).toISOString(),cloudinaryId:c,isCloudinary:d},g=[...s,x];try{localStorage.setItem(r,JSON.stringify(g))}catch(o){if(!(o instanceof DOMException&&22===o.code))throw o;{const e=s.slice(-10);localStorage.setItem(r,JSON.stringify([...e,x]))}}return x}catch(o){throw console.error("Error adding item:",(0,l.F0)(String(o))),o}}async removeItem(e){try{const t=this.getItems(),s=t.find(t=>t.id===e);null!==s&&void 0!==s&&s.isCloudinary&&s.cloudinaryId&&await a.Y.deleteFile(s.cloudinaryId,s.type);const l=t.filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(l))}catch(t){throw console.error("Error removing item:",(0,l.F0)(String(t))),new Error("No se pudo eliminar el archivo.")}}clearAll(){localStorage.removeItem(r)}getStorageInfo(){const e=this.getItems();return{used:e.length,limit:999999,items:e.length,percentage:Math.min(Math.round(e.length/1e3*100),100),isProduction:i}}fileToBase64(e){return new Promise((t,s)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=s,a.readAsDataURL(e)})}optimizeImage(e,t){return e.isCloudinary&&e.src?a.Y.optimizeImageUrl(e.src,t):e.src}}},5469:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5613:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5684:(e,t,s)=>{s.d(t,{Y:()=>l});const a={cloudName:"dxhhdmcbw",uploadPreset:"gallery_uploads",apiKey:"your_api_key"};const l=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;this.config=void 0,this.config=e}async uploadFile(e){const t=new FormData;t.append("file",e),t.append("upload_preset",this.config.uploadPreset),e.type.startsWith("video/")&&t.append("resource_type","video");try{var s,a;console.log("Uploading to Cloudinary:",{cloudName:this.config.cloudName,preset:this.config.uploadPreset,fileType:e.type,fileSize:e.size});const l=await fetch("https://api.cloudinary.com/v1_1/".concat(this.config.cloudName,"/").concat(e.type.startsWith("video/")?"video":"image","/upload"),{method:"POST",body:t});if(console.log("Cloudinary response status:",l.status),!l.ok){const e=await l.text();throw console.error("Cloudinary error response:",e),new Error("Cloudinary error: ".concat(l.status," - ").concat(e))}const r=await l.json();return console.log("Cloudinary success:",r.public_id),{url:r.secure_url,publicId:r.public_id,thumbnail:(null===(s=r.eager)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.secure_url)||r.secure_url}}catch(l){throw console.error("Cloudinary upload failed:",l),l}}async deleteFile(e){try{return console.log("Archivo ".concat(e," marcado para eliminaci\xf3n")),!0}catch(t){return console.error("Error deleting from Cloudinary:",String(t).substring(0,100)),!1}}optimizeImageUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.includes("cloudinary.com"))return e;const{width:s=800,height:a=600,quality:l=80,format:r="auto"}=t,i="c_fill,w_".concat(s,",h_").concat(a,",q_").concat(l,",f_").concat(r);return e.replace("/upload/","/upload/".concat(i,"/"))}getVideoWithPoster(e){if(!e.includes("cloudinary.com"))return{videoUrl:e,posterUrl:e};const t=e.replace("/video/upload/","/image/upload/").replace(/\.[^.]+$/,".jpg");return{videoUrl:e,posterUrl:t}}}},7336:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(2555),l=s(5043),r=s(12),i=s(2330),o=s(614),n=s(9333);const c=(0,s(1639).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var d=s(8421),x=s(5684),g=s(579);const m=e=>{let{onVideoUploaded:t,onClose:s}=e;const{colors:m}=(0,d.D)(),[p,h]=(0,l.useState)(!1),[u,y]=(0,l.useState)(0),[v,b]=(0,l.useState)(null),[j,f]=(0,l.useState)(null),[N,w]=(0,l.useState)({title:"",description:""}),k=(0,l.useRef)(null);return(0,g.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&s(),children:(0,g.jsxs)(r.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,g.jsx)(i.A,{className:"w-5 h-5 text-white"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-lg font-bold",style:{color:m.secondary},children:"Subir Video de Instagram"}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"M\xe1ximo 500MB"})]})]}),(0,g.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,g.jsx)(o.A,{className:"w-5 h-5"})})]}),(0,g.jsxs)("div",{className:"p-6 space-y-6",children:[v?(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-black",children:[(0,g.jsx)("video",{src:j,className:"w-full h-48 object-contain",controls:!0,muted:!0}),(0,g.jsx)("button",{onClick:()=>{b(null),f(null),j&&URL.revokeObjectURL(j)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,g.jsx)(o.A,{className:"w-4 h-4"})})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Archivo:"})," ",v.name]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Tama\xf1o:"})," ",(v.size/1048576).toFixed(2)," MB"]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Tipo:"})," ",v.type]})]})]}):(0,g.jsx)("div",{onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed rounded-xl p-8 text-center cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:m.primary},children:(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("div",{className:"w-16 h-16 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,g.jsx)(n.A,{className:"w-8 h-8 text-white"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"text-lg font-semibold mb-2",style:{color:m.secondary},children:"Seleccionar Video"}),(0,g.jsx)("p",{className:"text-gray-600 text-sm",children:"Haz clic para seleccionar un video de Instagram"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Formatos: MP4, MOV, AVI \u2022 M\xe1ximo 500MB"})]})]})}),(0,g.jsx)("input",{ref:k,type:"file",accept:"video/*",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;if(!s.type.startsWith("video/"))return void alert("Por favor selecciona un archivo de video v\xe1lido");if(s.size>524288e3)return void alert("El video es muy grande. M\xe1ximo 500MB permitido.");b(s);const l=URL.createObjectURL(s);f(l),N.title||w(e=>(0,a.A)((0,a.A)({},e),{},{title:"Video Instagram ".concat((new Date).toLocaleDateString())}))},className:"hidden"}),v&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:m.secondary},children:"T\xedtulo del Video"}),(0,g.jsx)("input",{type:"text",value:N.title,onChange:e=>w(t=>(0,a.A)((0,a.A)({},t),{},{title:e.target.value})),placeholder:"Ej: Nuevo producto en acci\xf3n",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2",style:{borderColor:m.primary}})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:m.secondary},children:"Descripci\xf3n (Opcional)"}),(0,g.jsx)("textarea",{value:N.description,onChange:e=>w(t=>(0,a.A)((0,a.A)({},t),{},{description:e.target.value})),placeholder:"Describe el contenido del video...",rows:3,className:"w-full p-3 border rounded-lg resize-none focus:outline-none focus:ring-2",style:{borderColor:m.primary}})]})]}),p&&(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,g.jsx)("span",{style:{color:m.secondary},children:"Subiendo video..."}),(0,g.jsxs)("span",{style:{color:m.primary},children:[u,"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)(r.P.div,{initial:{width:0},animate:{width:"".concat(u,"%")},className:"h-2 rounded-full",style:{backgroundColor:m.primary}})}),100===u&&(0,g.jsxs)("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[(0,g.jsx)(c,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"\xa1Video subido exitosamente!"})]})]}),(0,g.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,g.jsx)("button",{onClick:s,disabled:p,className:"flex-1 px-4 py-3 border rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,g.jsx)("button",{onClick:async()=>{if(v){h(!0),y(0);try{const e=setInterval(()=>{y(t=>t>=90?(clearInterval(e),90):t+10)},200),a=await x.Y.uploadFile(v);clearInterval(e),y(100),setTimeout(()=>{t({url:a.url,thumbnail:a.thumbnail||a.url,title:N.title,description:N.description,publicId:a.publicId}),b(null),f(null),w({title:"",description:""}),h(!1),y(0),s()},1e3)}catch(e){console.error("Error uploading video:",e),alert("Error al subir el video. Intenta de nuevo."),h(!1),y(0)}}},disabled:!v||!N.title.trim()||p,className:"flex-1 px-4 py-3 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:m.primary},children:p?"Subiendo...":"Subir Video"})]})]})]})})}},7365:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9292:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9333:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},9493:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9855:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=857.e823fef0.chunk.js.map